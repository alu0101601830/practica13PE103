{"version":3,"file":"/home/usuario/practicas/practica9/ull-esit-inf-dsi-22-23-prct09-funko-app-alu0101601830/src/Mochila.ts","sources":["/home/usuario/practicas/practica9/ull-esit-inf-dsi-22-23-prct09-funko-app-alu0101601830/src/Mochila.ts"],"names":[],"mappings":"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","sourcesContent":["import * as fs from 'fs';\n\n/**\n * Elementos de la mochila\n * @type\n */\ntype ElementoMochila = {\n  numElemento: number;\n  peso: number;\n  beneficio: number;\n};\n\n/**\n * Clase abstracta para representar una mochila\n * @abstract\n */\nabstract class Mochila {\n  /**\n   * Método abstracto para extraer datos de un archivo CSV\n   * @param data - Datos en formato CSV\n   * @returns Objeto con la capacidad y los elementos de la mochila\n   */\n  protected abstract extraerDatosCSV(data: string): { capacidad: number; elementos: ElementoMochila[] };\n  /**\n   * Método abstracto para extraer datos de un archivo JSON\n   * @param data - Datos en formato JSON\n   * @returns Objeto con la capacidad y los elementos de la mochila\n   */\n  protected abstract extraerDatosJSON(data: string): { capacidad: number; elementos: ElementoMochila[] };\n\n  /**\n   * Método para procesar un archivo de datos y obtener los beneficios y pesos de los elementos de la mochila\n   * @param filePath - Ruta del archivo de datos\n   * @returns  Objeto con los beneficios y pesos de los elementos de la mochila\n   * @throws Error si el archivo no existe o el formato no es soportado\n   */\n  public procesar(filePath: string): { beneficios: number[]; pesos: number[] } {\n    if (!fs.existsSync(filePath)) {\n      throw new Error('El archivo no existe en la ruta especificada.');\n    }\n    const data = fs.readFileSync(filePath, 'utf8');\n    const extension = filePath.split('.').pop()?.toLowerCase() || '';\n    let elementos: ElementoMochila[];\n\n    if (extension === 'csv') {\n      const { elementos: elementosExtraidos } = this.extraerDatosCSV(data);\n      elementos = elementosExtraidos;\n    } else if (extension === 'json') {\n      const { elementos: elementosExtraidos } = this.extraerDatosJSON(data);\n      elementos = elementosExtraidos;\n    } else {\n      throw new Error('Formato de archivo no soportado.');\n    }\n\n    const beneficios = elementos.map((elemento) => elemento.beneficio);\n    const pesos = elementos.map((elemento) => elemento.peso);\n\n    return { beneficios, pesos };\n  }\n}\n\n/**\n * Clase concreta para representar una mochila con datos en formato CSV\n * @extends Mochila\n */\nexport class MochilaCSV extends Mochila {\n  /**\n   * Método implementado en la otra clase\n   * @param data - Datos en formato JSON\n   * @throws Error por no estar implementado\n   */\n  protected extraerDatosJSON(data: string): { capacidad: number; elementos: ElementoMochila[]; } {\n      throw new Error('Method not implemented.');\n  }\n  /**\n   * Método para extraer datos de un archivo CSV\n   * @param data - Datos en formato CSV\n   * @returns Objeto con la capacidad y los elementos de la mochila\n   */\n  protected extraerDatosCSV(data: string): { capacidad: number; elementos: ElementoMochila[] } {\n    const lines = data.trim().split('\\n');\n    const capacidad = parseInt(lines[0]);\n    const numElemento = parseInt(lines[1]);\n\n    const elementos: ElementoMochila[] = lines.slice(2).map((line, index) => {\n      const [beneficio, peso] = line.split(' ').map(Number);\n      return { numElemento: index + 1, beneficio, peso };\n    });\n\n    return { capacidad, elementos };\n  }\n}\n\n/**\n * Clase concreta para representar una mochila con datos en formato JSON\n * @extends Mochila\n */\nexport class MochilaJSON extends Mochila {\n  /**\n   * Método implementado en la otra clase\n   * @param data - Datos en formato CSV\n   * @throws Error por no estar implementado\n   */\n  protected extraerDatosCSV(data: string): { capacidad: number; elementos: ElementoMochila[]; } {\n      throw new Error('Method not implemented.');\n  }\n  /**\n   * Método para extraer datos de un archivo JSON\n   * @param data - Datos en formato JSON\n   * @returns Objeto con la capacidad y los elementos de la mochila\n   */\n  protected extraerDatosJSON(data: string): { capacidad: number; elementos: ElementoMochila[] } {\n    const jsonData = JSON.parse(data);\n    const capacidad = jsonData.capacidad;\n    const elementos: ElementoMochila[] = jsonData.elementos.map((elemento: any) => ({\n      numElemento: elemento.numElemento,\n      peso: elemento.peso,\n      beneficio: elemento.beneficio,\n    }));\n\n    return { capacidad, elementos };\n  }\n}\n\n\nconst extractorCSV = new MochilaCSV();\nconst resultadoCSV = extractorCSV.procesar('src/data/archivo.csv'); \nconsole.log(resultadoCSV);\n\nconst extractorJSON = new MochilaJSON();\nconst resultadoJSON = extractorJSON.procesar('src/data/archivo.json');\nconsole.log(resultadoJSON);\n"]}